# Default values for todo-frontend Helm chart
# Generated via spec-driven development (T032)
# These values can be overridden with helm install --values custom-values.yaml

# ============================================================================
# Deployment Configuration
# ============================================================================

# Number of pod replicas
replicaCount: 1

# Docker image configuration
image:
  # Image repository (docker image name)
  repository: todo-frontend

  # Image pull policy: Always, IfNotPresent, Never
  # Never: Use local Minikube image (no registry pull)
  pullPolicy: Never

  # Image tag/version
  tag: "latest"

# Image pull secrets (for private registries)
# Not needed for local Minikube development
imagePullSecrets: []

# Service account configuration
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000

# Container security context
securityContext:
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL

# ============================================================================
# Container Configuration
# ============================================================================

# Container port (nginx serves on port 80)
containerPort: 80

# Environment variables (non-sensitive, public)
env:
  # Backend service name (resolved by Kubernetes DNS)
  # Format: service-name.namespace.svc.cluster.local
  # For local: just service-name works within same namespace
  NEXT_PUBLIC_API_URL: "http://todo-backend:8000"

# Frontend doesn't use secrets, but keeping structure for consistency
secrets:
  name: app-secrets

# ============================================================================
# Health Checks (Probes)
# ============================================================================

probes:
  # Readiness probe: determines if pod can receive traffic
  readiness:
    enabled: true
    initialDelaySeconds: 10
    timeoutSeconds: 3
    periodSeconds: 30
    successThreshold: 1
    failureThreshold: 3

  # Liveness probe: determines if pod should be restarted
  liveness:
    enabled: true
    initialDelaySeconds: 15
    timeoutSeconds: 3
    periodSeconds: 30
    successThreshold: 1
    failureThreshold: 3

# ============================================================================
# Resource Management
# ============================================================================

# Resource requests (guaranteed to pod)
resources:
  requests:
    # CPU: 100 millicores (0.1 CPU)
    cpu: 100m
    # Memory: 128 MiB (smaller than backend since it's just nginx)
    memory: 128Mi

  # Resource limits (maximum pod can use)
  limits:
    # CPU: 200 millicores (0.2 CPU)
    cpu: 200m
    # Memory: 256 MiB
    memory: 256Mi

# ============================================================================
# Service Configuration
# ============================================================================

service:
  # Service type: ClusterIP, NodePort, LoadBalancer
  # NodePort: External access via specific port on each node
  type: NodePort

  # Service port (external, what NodePort exposes)
  port: 80

  # Container port (internal, what nginx listens on)
  targetPort: 80

  # Node port (specific port on each Minikube node)
  # Minikube service will be accessible at: http://<minikube-ip>:30000
  nodePort: 30000

  # Service annotations
  annotations: {}

# ============================================================================
# Deployment Strategy
# ============================================================================

# Rolling update strategy
strategy:
  type: RollingUpdate
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 0

# Pod disruption budget (minimum pods that must stay running)
podDisruptionBudget:
  enabled: false
  minAvailable: 1

# ============================================================================
# Scaling & Auto-scaling
# ============================================================================

# Horizontal Pod Autoscaler
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80

# ============================================================================
# Advanced Configuration
# ============================================================================

# Node affinity (which nodes to schedule pods on)
affinity: {}

# Tolerations (schedule on nodes with taints)
tolerations: []

# Node selector (schedule on specific nodes)
nodeSelector: {}

# DNS policy
dnsPolicy: ClusterFirst

# Termination grace period (seconds to wait before force killing pod)
terminationGracePeriodSeconds: 30

# ============================================================================
# Labels & Selectors
# ============================================================================

# Common labels applied to all resources
commonLabels:
  app.kubernetes.io/name: todo-frontend
  app.kubernetes.io/version: "1.0.0"
  app.kubernetes.io/managed-by: helm
