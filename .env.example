# ============================================================================
# Phase II – III – IV: Todo AI Chatbot Application Environment Variables
# ============================================================================
#
# Purpose: Template for all required environment variables across local
#          development, Docker builds, and Kubernetes deployment.
#
# Instructions:
#   1. Local Development:
#      - Copy this file to .env.local (frontend) or .env (backend)
#      - Fill in your actual values
#      - Never commit real secrets to version control
#
#   2. Docker Build:
#      - ARG directives in Dockerfiles read from build context or --build-arg
#      - Values are baked into images; use carefully
#
#   3. Kubernetes Deployment:
#      - Create secrets: kubectl create secret generic app-secrets --from-literal=...
#      - Reference in Helm values.yaml; never commit real values
#      - All secrets mounted as environment variables via secretRef
#
# ============================================================================

# --- PHASE II: Database & Authentication ---

# Neon PostgreSQL Database URL (serverless connection string)
# Format: postgresql://user:password@host:port/database?sslmode=require
# Example: postgresql://user:password@ep-xyz.us-east-1.neon.tech:5432/neondb?sslmode=require
DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require

# Better Auth Shared Secret (used for JWT token signing/verification)
# Used by both frontend (token generation) and backend (token validation)
# Generate: openssl rand -base64 32
# Important: Must be identical on frontend and backend
BETTER_AUTH_SECRET=your-secure-random-secret-here

# Frontend: Next.js Public API URL
# Used by browser to communicate with backend API
# Local: http://localhost:8000
# Production: https://api.example.com
NEXT_PUBLIC_API_URL=http://localhost:8000

# --- PHASE III: AI Chatbot (Cohere Integration) ---

# Cohere API Key (backend-only, never exposed to frontend)
# Generate at: https://dashboard.cohere.com/api-keys
# Backend uses this for chat completions, intent parsing, tool orchestration
COHERE_API_KEY=your-cohere-api-key-here

# --- PHASE IV: Kubernetes & Containerization ---

# Docker Build Context (optional, used in Dockerfile ARG directives)
# Helps identify build source in image metadata
DOCKER_BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')
DOCKER_VCS_REF=$(git rev-parse --short HEAD)

# Kubernetes: Image pull policy for local Minikube
# Options: Always, IfNotPresent, Never
# Recommended for local: Never (use minikube image load instead of registry)
K8S_IMAGE_PULL_POLICY=Never

# Kubernetes: Replica counts (can be overridden per deployment via Helm values.yaml)
K8S_FRONTEND_REPLICAS=1
K8S_BACKEND_REPLICAS=1

# --- Optional: Development & Logging ---

# Debug Mode (enables verbose logging in backend)
DEBUG=false

# Application Environment
# Options: development, staging, production
APP_ENV=development

# ============================================================================
# Usage Examples:
# ============================================================================
#
# 1. Local Development (Backend):
#    python -m uvicorn backend.main:app --reload
#    Reads: DATABASE_URL, BETTER_AUTH_SECRET, COHERE_API_KEY
#
# 2. Local Development (Frontend):
#    npm run dev
#    Reads: NEXT_PUBLIC_API_URL (public, exposed to browser)
#    BETTER_AUTH_SECRET read from backend for token validation
#
# 3. Docker Build (Frontend):
#    docker build -f docker/frontend.Dockerfile \
#      -t todo-frontend:latest \
#      --build-arg NEXT_PUBLIC_API_URL=http://localhost:8000 \
#      .
#
# 4. Docker Build (Backend):
#    docker build -f docker/backend.Dockerfile \
#      -t todo-backend:latest \
#      --build-arg COHERE_API_KEY=$COHERE_API_KEY \
#      .
#
# 5. Kubernetes Deployment (Minikube):
#    kubectl create secret generic app-secrets \
#      --from-literal=DATABASE_URL=$DATABASE_URL \
#      --from-literal=BETTER_AUTH_SECRET=$BETTER_AUTH_SECRET \
#      --from-literal=COHERE_API_KEY=$COHERE_API_KEY
#
#    helm install todo-backend k8s/helm-charts/todo-backend \
#      --set image.pullPolicy=Never
#
# ============================================================================
